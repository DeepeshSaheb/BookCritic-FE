/*! For license information please see 312.5f16a716.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbook_critic_fe=self.webpackChunkbook_critic_fe||[]).push([[312],{2330:(e,s,r)=>{var a=r(5043);var t="function"===typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e===1/s)||e!==e&&s!==s},n=a.useState,o=a.useEffect,d=a.useLayoutEffect,i=a.useDebugValue;function l(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!t(e,r)}catch(a){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,s){return s()}:function(e,s){var r=s(),a=n({inst:{value:r,getSnapshot:s}}),t=a[0].inst,c=a[1];return d(function(){t.value=r,t.getSnapshot=s,l(t)&&c({inst:t})},[e,r,s]),o(function(){return l(t)&&c({inst:t}),e(function(){l(t)&&c({inst:t})})},[e]),i(r),r};s.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},6238:(e,s,r)=>{r.r(s),r.d(s,{ProfileSettingsPage:()=>x});var a=r(2555),t=r(5043),n=r(3216),o=r(2836),d=r(709),i=r(383),l=r(1561),c=r(764),m=r(684),u=r(8526),p=r(579);const x=()=>{const{user:e,logout:s}=(0,m.A)(),r=(0,n.Zp)(),[x,h]=(0,t.useState)({displayName:(null===e||void 0===e?void 0:e.displayName)||"",email:(null===e||void 0===e?void 0:e.email)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[y,f]=(0,t.useState)(""),[g,w]=(0,t.useState)(""),b=(0,o.n)(e=>u.D.updateProfile(e),{onSuccess:()=>{w("Profile updated successfully."),setTimeout(()=>{w("")},5e3)},onError:e=>{f((null===e||void 0===e?void 0:e.message)||"Failed to update profile. Please try again.")}}),j=(0,o.n)(e=>u.D.changePassword(e),{onSuccess:()=>{w("Password changed successfully. Please log in again."),setTimeout(()=>{s(),r("/login")},3e3)},onError:e=>{f((null===e||void 0===e?void 0:e.message)||"Failed to change password. Please try again.")}}),N=e=>{const{name:s,value:r}=e.target;h(e=>(0,a.A)((0,a.A)({},e),{},{[s]:r}))};return e?(0,p.jsx)(d.P,{children:(0,p.jsx)(i.m,{className:"py-8",children:(0,p.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,p.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Account Settings"}),g&&(0,p.jsx)(c.F,{type:"success",className:"mt-6",onClose:()=>w(""),children:g}),y&&(0,p.jsx)(c.F,{type:"error",className:"mt-6",onClose:()=>f(""),children:y}),(0,p.jsxs)("div",{className:"mt-8 bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,p.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,p.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Update your account's profile information."})]}),(0,p.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:(0,p.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f(""),w(""),(x.displayName.trim()||(f("Display name is required"),0))&&b.mutate({displayName:x.displayName})},className:"space-y-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Display Name"}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("input",{id:"displayName",name:"displayName",type:"text",required:!0,value:x.displayName,onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("input",{id:"email",name:"email",type:"email",disabled:!0,value:x.email,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 bg-gray-50 text-gray-500 sm:text-sm"})}),(0,p.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Email cannot be changed. Contact support if you need to update your email."})]}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{type:"submit",disabled:b.isLoading,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:b.isLoading?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.y,{size:"sm",color:"text-white",className:"mr-2"}),"Saving..."]}):"Save Changes"})})]})})]}),(0,p.jsxs)("div",{className:"mt-8 bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,p.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,p.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Change Password"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Ensure your account is using a secure password."})]}),(0,p.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:(0,p.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f(""),w(""),(x.currentPassword?x.newPassword.length<8?(f("New password must be at least 8 characters long"),0):x.newPassword===x.confirmPassword||(f("New passwords do not match"),0):(f("Current password is required"),0))&&j.mutate({currentPassword:x.currentPassword,newPassword:x.newPassword})},className:"space-y-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("input",{id:"currentPassword",name:"currentPassword",type:"password",required:!0,value:x.currentPassword,onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:x.newPassword,onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})}),(0,p.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters long."})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:x.confirmPassword,onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})})]}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{type:"submit",disabled:j.isLoading,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:j.isLoading?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.y,{size:"sm",color:"text-white",className:"mr-2"}),"Changing Password..."]}):"Change Password"})})]})})]}),(0,p.jsxs)("div",{className:"mt-8 bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,p.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,p.jsx)("h2",{className:"text-lg font-medium text-red-600",children:"Delete Account"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Once your account is deleted, all of your data will be permanently removed."})]}),(0,p.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:(0,p.jsx)("button",{type:"button",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")},children:"Delete Account"})})]})]})})}):(0,p.jsx)(d.P,{children:(0,p.jsx)(i.m,{className:"py-12",children:(0,p.jsx)(c.F,{type:"error",children:"You must be logged in to access this page."})})})}},9461:(e,s,r)=>{e.exports=r(2330)}}]);
//# sourceMappingURL=312.5f16a716.chunk.js.map