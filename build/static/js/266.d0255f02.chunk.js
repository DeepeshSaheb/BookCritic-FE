/*! For license information please see 266.d0255f02.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbook_critic_fe=self.webpackChunkbook_critic_fe||[]).push([[266],{2330:(e,t,s)=>{var r=s(5043);var n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,a=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!n(e,s)}catch(r){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),r=i({inst:{value:s,getSnapshot:t}}),n=r[0].inst,d=r[1];return o(function(){n.value=s,n.getSnapshot=t,c(n)&&d({inst:n})},[e,s,t]),a(function(){return c(n)&&d({inst:n}),e(function(){c(n)&&d({inst:n})})},[e]),l(s),s};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},2356:(e,t,s)=>{s.d(t,{G:()=>i});var r=s(5043),n=s(579);const i=e=>{let{rating:t=0,maxRating:s=5,size:i="md",color:a="text-yellow-400",readOnly:o=!1,onChange:l,className:c=""}=e;const[d,m]=(0,r.useState)(0),u={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return(0,n.jsx)("div",{className:"flex ".concat(c),onMouseLeave:()=>{o||m(0)},"aria-label":"Rating: ".concat(t," out of ").concat(s),children:Array.from({length:s},(e,r)=>{const c=r+1,x=d?c<=d:c<=t;return(0,n.jsx)("span",{className:"".concat(o?"":"cursor-pointer"),onMouseEnter:()=>{return e=c,void(o||m(e));var e},onClick:()=>{return e=c,void(!o&&l&&l(e));var e},role:o?void 0:"button",tabIndex:o?void 0:0,"aria-label":o?"Rating: ".concat(c," of ").concat(s):"Rate ".concat(c," of ").concat(s),children:x?(0,n.jsx)("svg",{className:"".concat(u[i]," ").concat(a),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}):(0,n.jsx)("svg",{className:"".concat(u[i]," text-gray-300"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},r)})})}},6272:(e,t,s)=>{s.r(t),s.d(t,{ReadingListPage:()=>v});var r=s(5043),n=s(5604),i=s(9781),a=s(2836),o=s(5475),l=s(709),c=s(383),d=s(1561),m=s(764),u=s(8964),x=s(2356),g=s(684),f=s(8526),h=s(579);const v=()=>{const{isAuthenticated:e,user:t}=(0,g.A)(),s=(0,i.jE)(),[v,y]=(0,r.useState)(1),{data:p,isLoading:b,error:j}=(0,n.I)(["readingList",v],()=>f.D.getReadingList(10*(v-1),10),{enabled:e,keepPreviousData:!0,staleTime:3e5}),N=(0,a.n)(e=>f.D.removeFromReadingList(e),{onSuccess:()=>{s.invalidateQueries(["readingList"])},onError:e=>{alert((null===e||void 0===e?void 0:e.message)||"Failed to remove book from reading list. Please try again.")}});return e?(0,h.jsx)(l.P,{children:(0,h.jsxs)(c.m,{className:"py-8",children:[(0,h.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"My Reading List"}),(0,h.jsx)("p",{className:"mt-2 text-lg text-gray-600",children:"Books you've saved to read later."})]}),(0,h.jsx)("div",{className:"mt-4 md:mt-0",children:(0,h.jsx)(o.N_,{to:"/books",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Browse Books"})})]}),(0,h.jsx)("div",{className:"mt-8",children:b?(0,h.jsx)("div",{className:"flex justify-center py-12",children:(0,h.jsx)(d.y,{size:"lg"})}):j?(0,h.jsx)(m.F,{type:"error",children:"Failed to load your reading list. Please try again later."}):p&&p.books.length>0?(0,h.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:p.books.map(e=>{var t;return(0,h.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,h.jsxs)("div",{className:"p-4 flex items-start",children:[(0,h.jsx)("div",{className:"flex-shrink-0 h-32 w-24 bg-gray-200 rounded overflow-hidden",children:e.coverImageUrl?(0,h.jsx)("img",{src:e.coverImageUrl,alt:"".concat(e.title," cover"),className:"h-full w-full object-cover"}):(0,h.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-gray-100 text-gray-400",children:"No Cover"})}),(0,h.jsxs)("div",{className:"ml-4 flex-1",children:[(0,h.jsx)(o.N_,{to:"/books/".concat(e.id),children:(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 hover:text-primary-600",children:e.title})}),(0,h.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.author}),(0,h.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,h.jsx)(x.G,{rating:e.averageRating||0,readOnly:!0,size:"sm"}),(0,h.jsxs)("span",{className:"ml-1 text-sm text-gray-500",children:["(",(null===(t=e.averageRating)||void 0===t?void 0:t.toFixed(1))||"No ratings",")"]})]}),(0,h.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,h.jsx)(o.N_,{to:"/books/".concat(e.id),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"View Details"}),(0,h.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to remove this book from your reading list?")&&N.mutate(t));var t},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",disabled:N.isLoading,children:"Remove"})]})]})]})},e.id)})}):(0,h.jsxs)("div",{className:"py-12 text-center",children:[(0,h.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,h.jsx)("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No books in your reading list"}),(0,h.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Start browsing books and add them to your reading list."}),(0,h.jsx)("div",{className:"mt-6",children:(0,h.jsx)(o.N_,{to:"/books",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Browse Books"})})]})}),p&&p.total>10&&(0,h.jsx)("div",{className:"mt-6 flex justify-center",children:(0,h.jsx)(u.d,{currentPage:v,totalPages:Math.ceil(p.total/10),onPageChange:e=>{y(e)}})})]})}):(0,h.jsx)(l.P,{children:(0,h.jsx)(c.m,{className:"py-12",children:(0,h.jsx)(m.F,{type:"error",children:"You need to be logged in to view your reading list."})})})}},8964:(e,t,s)=>{s.d(t,{d:()=>n});s(5043);var r=s(579);const n=e=>{let{currentPage:t,totalPages:s,onPageChange:n,className:i=""}=e;if(s<=1)return null;return(0,r.jsxs)("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 py-3 ".concat(i),"aria-label":"Pagination",children:[(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",(0,r.jsx)("span",{className:"font-medium",children:t})," of"," ",(0,r.jsx)("span",{className:"font-medium",children:s})]})}),(0,r.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[(0,r.jsx)("button",{onClick:()=>n(t-1),disabled:1===t,className:"relative inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,r.jsx)("div",{className:"hidden sm:flex sm:items-center",children:(0,r.jsx)("div",{className:"flex items-center space-x-1",children:(()=>{const e=[];e.push(1);const r=Math.max(2,t-1),n=Math.min(s-1,t+1);r>2&&e.push(-1);for(let t=r;t<=n;t++)e.push(t);return n<s-1&&e.push(-2),s>1&&e.push(s),e})().map((e,s)=>e<0?(0,r.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700",children:"..."},e):(0,r.jsx)("button",{onClick:()=>n(e),className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold ".concat(e===t?"bg-primary-600 text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"),"aria-current":e===t?"page":void 0,children:e},e))})}),(0,r.jsx)("button",{onClick:()=>n(t+1),disabled:t===s,className:"relative ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}},9461:(e,t,s)=>{e.exports=s(2330)}}]);
//# sourceMappingURL=266.d0255f02.chunk.js.map