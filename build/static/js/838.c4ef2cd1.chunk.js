/*! For license information please see 838.c4ef2cd1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbook_critic_fe=self.webpackChunkbook_critic_fe||[]).push([[838],{2330:(e,s,t)=>{var r=t(5043);var a="function"===typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e===1/s)||e!==e&&s!==s},n=r.useState,l=r.useEffect,o=r.useLayoutEffect,i=r.useDebugValue;function c(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!a(e,t)}catch(r){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),r=n({inst:{value:t,getSnapshot:s}}),a=r[0].inst,d=r[1];return o(function(){a.value=t,a.getSnapshot=s,c(a)&&d({inst:a})},[e,t,s]),l(function(){return c(a)&&d({inst:a}),e(function(){c(a)&&d({inst:a})})},[e]),i(t),t};s.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},2356:(e,s,t)=>{t.d(s,{G:()=>n});var r=t(5043),a=t(579);const n=e=>{let{rating:s=0,maxRating:t=5,size:n="md",color:l="text-yellow-400",readOnly:o=!1,onChange:i,className:c=""}=e;const[d,u]=(0,r.useState)(0),m={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return(0,a.jsx)("div",{className:"flex ".concat(c),onMouseLeave:()=>{o||u(0)},"aria-label":"Rating: ".concat(s," out of ").concat(t),children:Array.from({length:t},(e,r)=>{const c=r+1,x=d?c<=d:c<=s;return(0,a.jsx)("span",{className:"".concat(o?"":"cursor-pointer"),onMouseEnter:()=>{return e=c,void(o||u(e));var e},onClick:()=>{return e=c,void(!o&&i&&i(e));var e},role:o?void 0:"button",tabIndex:o?void 0:0,"aria-label":o?"Rating: ".concat(c," of ").concat(t):"Rate ".concat(c," of ").concat(t),children:x?(0,a.jsx)("svg",{className:"".concat(m[n]," ").concat(l),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}):(0,a.jsx)("svg",{className:"".concat(m[n]," text-gray-300"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},r)})})}},8964:(e,s,t)=>{t.d(s,{d:()=>a});t(5043);var r=t(579);const a=e=>{let{currentPage:s,totalPages:t,onPageChange:a,className:n=""}=e;if(t<=1)return null;return(0,r.jsxs)("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 py-3 ".concat(n),"aria-label":"Pagination",children:[(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",(0,r.jsx)("span",{className:"font-medium",children:s})," of"," ",(0,r.jsx)("span",{className:"font-medium",children:t})]})}),(0,r.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[(0,r.jsx)("button",{onClick:()=>a(s-1),disabled:1===s,className:"relative inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,r.jsx)("div",{className:"hidden sm:flex sm:items-center",children:(0,r.jsx)("div",{className:"flex items-center space-x-1",children:(()=>{const e=[];e.push(1);const r=Math.max(2,s-1),a=Math.min(t-1,s+1);r>2&&e.push(-1);for(let s=r;s<=a;s++)e.push(s);return a<t-1&&e.push(-2),t>1&&e.push(t),e})().map((e,t)=>e<0?(0,r.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700",children:"..."},e):(0,r.jsx)("button",{onClick:()=>a(e),className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold ".concat(e===s?"bg-primary-600 text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"),"aria-current":e===s?"page":void 0,children:e},e))})}),(0,r.jsx)("button",{onClick:()=>a(s+1),disabled:s===t,className:"relative ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}},9156:(e,s,t)=>{t.r(s),t.d(s,{BooksPage:()=>g});var r=t(2555),a=t(5043),n=t(5475),l=t(5604),o=t(709),i=t(383),c=t(8964),d=t(2356),u=t(1561),m=t(764),x=t(9256),h=t(579);const g=()=>{const[e,s]=(0,n.ok)(),[t,g]=(0,a.useState)({search:e.get("search")||"",genre:e.get("genre")||"",sortBy:e.get("sortBy")||"title",sortOrder:e.get("sortOrder")||"asc"}),f=parseInt(e.get("page")||"1",10),p=12,v=(f-1)*p;(0,a.useEffect)(()=>{const e=new URLSearchParams;t.search&&e.set("search",t.search),t.genre&&e.set("genre",t.genre),"title"!==t.sortBy&&e.set("sortBy",t.sortBy),"asc"!==t.sortOrder&&e.set("sortOrder",t.sortOrder),f>1&&e.set("page",f.toString()),s(e)},[t,f,s]);const{data:y,isLoading:b,error:j}=(0,l.I)(["books",v,p,t],()=>t.search?x.l.searchBooks(t.search,v,p):x.l.getBooks(v,p),{keepPreviousData:!0,staleTime:3e5}),w=t=>{const{name:a,value:n}=t.target;g(e=>(0,r.A)((0,r.A)({},e),{},{[a]:n})),e.set("page","1"),s(e)};return(0,h.jsx)(o.P,{children:(0,h.jsxs)(i.m,{className:"py-8",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"Browse Books"}),(0,h.jsxs)("div",{className:"mt-6 flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-x-4 sm:space-y-0",children:[(0,h.jsx)("form",{onSubmit:t=>{t.preventDefault(),e.set("page","1"),s(e)},className:"flex-1",children:(0,h.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,h.jsx)("input",{type:"text",name:"search",id:"search",value:t.search,onChange:e=>{g(s=>(0,r.A)((0,r.A)({},s),{},{search:e.target.value}))},placeholder:"Search books by title, author, or ISBN",className:"block w-full rounded-md border-gray-300 pr-10 focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),(0,h.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,h.jsx)("button",{type:"submit",className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,h.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})})]})}),(0,h.jsxs)("div",{className:"flex space-x-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"sortBy",className:"block text-sm font-medium text-gray-700",children:"Sort By"}),(0,h.jsxs)("select",{id:"sortBy",name:"sortBy",value:t.sortBy,onChange:w,className:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm",children:[(0,h.jsx)("option",{value:"title",children:"Title"}),(0,h.jsx)("option",{value:"author",children:"Author"}),(0,h.jsx)("option",{value:"publishedDate",children:"Publication Date"}),(0,h.jsx)("option",{value:"averageRating",children:"Rating"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"sortOrder",className:"block text-sm font-medium text-gray-700",children:"Order"}),(0,h.jsxs)("select",{id:"sortOrder",name:"sortOrder",value:t.sortOrder,onChange:w,className:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm",children:[(0,h.jsx)("option",{value:"asc",children:"Ascending"}),(0,h.jsx)("option",{value:"desc",children:"Descending"})]})]})]})]}),(0,h.jsx)("div",{className:"mt-8",children:b?(0,h.jsx)("div",{className:"flex justify-center py-12",children:(0,h.jsx)(u.y,{size:"lg"})}):j?(0,h.jsx)(m.F,{type:"error",children:"Failed to load books. Please try again later."}):y&&y.books.length>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:y.books.map(e=>(0,h.jsxs)("div",{className:"group relative",children:[(0,h.jsx)("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none lg:h-80",children:(0,h.jsx)("img",{src:e.coverImageUrl||"https://via.placeholder.com/300x450?text=No+Cover",alt:e.title,className:"h-full w-full object-cover object-center lg:h-full lg:w-full"})}),(0,h.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:(0,h.jsxs)("a",{href:"/books/".concat(e.id),children:[(0,h.jsx)("span",{"aria-hidden":"true",className:"absolute inset-0"}),e.title]})}),(0,h.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.author})]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(d.G,{rating:e.averageRating||0,readOnly:!0,size:"sm"}),(0,h.jsxs)("span",{className:"ml-1 text-sm text-gray-500",children:["(",e.totalReviews,")"]})]})]})]},e.id))}),y.total>p&&(0,h.jsx)("div",{className:"mt-8 flex justify-center",children:(0,h.jsx)(c.d,{currentPage:f,totalPages:Math.ceil(y.total/p),onPageChange:t=>{e.set("page",t.toString()),s(e),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,h.jsx)("div",{className:"py-12 text-center text-gray-500",children:"No books found. Try adjusting your search or filters."})})]})})}},9461:(e,s,t)=>{e.exports=t(2330)}}]);
//# sourceMappingURL=838.c4ef2cd1.chunk.js.map