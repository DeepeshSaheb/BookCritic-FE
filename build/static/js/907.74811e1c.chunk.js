"use strict";(self.webpackChunkbook_critic_fe=self.webpackChunkbook_critic_fe||[]).push([[907],{6907:(s,e,r)=>{r.r(e),r.d(e,{ResetPasswordPage:()=>p});var a=r(2555),t=r(5043),o=r(3216),d=r(5475),n=r(709),l=r(383),m=r(764),c=r(1561),i=r(615),u=r(579);const p=()=>{const s=(0,o.Zp)(),e=(0,o.zy)(),[r,p]=(0,t.useState)({password:"",confirmPassword:""}),[x,w]=(0,t.useState)(!1),[h,f]=(0,t.useState)(""),[y,b]=(0,t.useState)(!1),g=new URLSearchParams(e.search).get("token"),j=s=>{const{name:e,value:r}=s.target;p(s=>(0,a.A)((0,a.A)({},s),{},{[e]:r}))};return(0,u.jsx)(n.P,{children:(0,u.jsxs)(l.m,{maxWidth:"sm",className:"mt-8",children:[(0,u.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,u.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),(0,u.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below"})]}),(0,u.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,u.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[h&&(0,u.jsx)(m.F,{type:"error",className:"mb-4",onClose:()=>f(""),children:h}),y?(0,u.jsxs)(m.F,{type:"success",className:"mb-4",children:[(0,u.jsx)("p",{children:"Your password has been successfully reset!"}),(0,u.jsx)("p",{className:"mt-2",children:"You will be redirected to the login page in a few seconds..."})]}):(0,u.jsxs)("form",{className:"space-y-6",onSubmit:async e=>{if(e.preventDefault(),f(""),r.password!==r.confirmPassword?(f("Passwords do not match"),0):r.password.length<8?(f("Password must be at least 8 characters long"),0):g||(f("Invalid or missing reset token"),0)){w(!0);try{g?(await i.u.resetPassword(g,r.password),b(!0),setTimeout(()=>{s("/login")},3e3)):f("Invalid or missing reset token")}catch(a){f(a instanceof Error?a.message:"Failed to reset password. Please try again.")}finally{w(!1)}}},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r.password,onChange:j,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})}),(0,u.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters long"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:r.confirmPassword,onChange:j,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[x?(0,u.jsx)(c.y,{size:"sm",color:"text-white",className:"mr-2"}):null,"Reset Password"]})})]}),(0,u.jsx)("div",{className:"mt-6 text-center",children:(0,u.jsx)(d.N_,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Back to login"})})]})})]})})}}}]);
//# sourceMappingURL=907.74811e1c.chunk.js.map