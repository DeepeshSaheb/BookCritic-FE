/*! For license information please see 885.c20ff8d7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbook_critic_fe=self.webpackChunkbook_critic_fe||[]).push([[885],{2330:(e,t,s)=>{var a=s(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},n=a.useState,r=a.useEffect,c=a.useLayoutEffect,l=a.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!i(e,s)}catch(a){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=n({inst:{value:s,getSnapshot:t}}),i=a[0].inst,d=a[1];return c(function(){i.value=s,i.getSnapshot=t,o(i)&&d({inst:i})},[e,s,t]),r(function(){return o(i)&&d({inst:i}),e(function(){o(i)&&d({inst:i})})},[e]),l(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},2356:(e,t,s)=>{s.d(t,{G:()=>n});var a=s(5043),i=s(579);const n=e=>{let{rating:t=0,maxRating:s=5,size:n="md",color:r="text-yellow-400",readOnly:c=!1,onChange:l,className:o=""}=e;const[d,m]=(0,a.useState)(0),x={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return(0,i.jsx)("div",{className:"flex ".concat(o),onMouseLeave:()=>{c||m(0)},"aria-label":"Rating: ".concat(t," out of ").concat(s),children:Array.from({length:s},(e,a)=>{const o=a+1,h=d?o<=d:o<=t;return(0,i.jsx)("span",{className:"".concat(c?"":"cursor-pointer"),onMouseEnter:()=>{return e=o,void(c||m(e));var e},onClick:()=>{return e=o,void(!c&&l&&l(e));var e},role:c?void 0:"button",tabIndex:c?void 0:0,"aria-label":c?"Rating: ".concat(o," of ").concat(s):"Rate ".concat(o," of ").concat(s),children:h?(0,i.jsx)("svg",{className:"".concat(x[n]," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}):(0,i.jsx)("svg",{className:"".concat(x[n]," text-gray-300"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},a)})})}},2713:(e,t,s)=>{s.r(t),s.d(t,{ProfilePage:()=>v});var a=s(5043),i=s(5475),n=s(5604),r=s(709),c=s(383),l=s(1561),o=s(764),d=s(8964),m=s(2356),x=s(684),h=s(7153),u=s(579);const v=()=>{const{user:e}=(0,x.A)(),[t,s]=(0,a.useState)(1),{data:v,isLoading:g,error:p}=(0,n.I)(["userReviews",null===e||void 0===e?void 0:e.id,t],()=>h.C.getUserReviews(e.id,5*(t-1),5),{enabled:!(null===e||void 0===e||!e.id),keepPreviousData:!0,staleTime:3e5});return e?(0,u.jsx)(r.P,{children:(0,u.jsx)(c.m,{className:"py-8",children:(0,u.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,u.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,u.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"h-16 w-16 rounded-full bg-primary-100 flex items-center justify-center text-primary-800 text-2xl font-bold",children:e.displayName.charAt(0).toUpperCase()}),(0,u.jsxs)("div",{className:"ml-6",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e.displayName}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,u.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:(0,u.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[(0,u.jsxs)("div",{className:"sm:col-span-1",children:[(0,u.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Account type"}),(0,u.jsx)("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:e.role})]}),(0,u.jsxs)("div",{className:"sm:col-span-1",children:[(0,u.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Actions"}),(0,u.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 space-y-2",children:[(0,u.jsx)("div",{children:(0,u.jsx)(i.N_,{to:"/profile/settings",className:"text-primary-600 hover:text-primary-500",children:"Edit Profile"})}),(0,u.jsx)("div",{children:(0,u.jsx)(i.N_,{to:"/profile/reading-list",className:"text-primary-600 hover:text-primary-500",children:"My Reading List"})})]})]})]})})]}),(0,u.jsxs)("div",{id:"reviews",className:"mt-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Your Reviews"}),(0,u.jsx)(i.N_,{to:"/books",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Browse Books to Review"})]}),(0,u.jsx)("div",{className:"mt-6",children:g?(0,u.jsx)("div",{className:"flex justify-center py-12",children:(0,u.jsx)(l.y,{size:"md"})}):p?(0,u.jsx)(o.F,{type:"error",children:"Failed to load your reviews. Please try again later."}):v&&v.reviews.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"space-y-8",children:v.reviews.map(e=>{return(0,u.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,u.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:(0,u.jsx)(i.N_,{to:"/books/".concat(e.book.id),className:"hover:text-primary-600",children:e.book.title})}),(0,u.jsxs)("div",{className:"flex space-x-3",children:[(0,u.jsx)(i.N_,{to:"/reviews/".concat(e.id,"/edit"),className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Edit"}),(0,u.jsx)("button",{className:"text-sm font-medium text-red-600 hover:text-red-500",onClick:()=>{},children:"Delete"})]})]}),(0,u.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,u.jsx)(m.G,{rating:e.rating,readOnly:!0,size:"sm"}),(0,u.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:(t=e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))})]})]}),(0,u.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:(0,u.jsx)("p",{className:"text-sm text-gray-600",children:e.content})})]},e.id);var t})}),v.total>5&&(0,u.jsx)("div",{className:"mt-8 flex justify-center",children:(0,u.jsx)(d.d,{currentPage:t,totalPages:Math.ceil(v.total/5),onPageChange:e=>{var t;s(e),window.scrollTo({top:(null===(t=document.getElementById("reviews"))||void 0===t?void 0:t.offsetTop)||0,behavior:"smooth"})}})})]}):(0,u.jsxs)("div",{className:"py-12 text-center text-gray-500",children:[(0,u.jsx)("p",{children:"You haven't written any reviews yet."}),(0,u.jsxs)("p",{className:"mt-2",children:[(0,u.jsx)(i.N_,{to:"/books",className:"text-primary-600 hover:text-primary-500",children:"Browse books"})," ","to find something to review."]})]})})]})]})})}):(0,u.jsx)(r.P,{children:(0,u.jsx)(c.m,{className:"py-12",children:(0,u.jsx)(o.F,{type:"error",children:"You must be logged in to view your profile."})})})}},7153:(e,t,s)=>{s.d(t,{C:()=>i});var a=s(6291);const i={getReviews:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.A.get("/reviews?skip=".concat(e,"&take=").concat(t))},getBookReviews:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return a.A.get("/reviews/book/".concat(e,"?skip=").concat(t,"&take=").concat(s))},getUserReviews:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return a.A.get("/reviews/user/".concat(e,"?skip=").concat(t,"&take=").concat(s))},getReviewById:async e=>a.A.get("/reviews/".concat(e)),createReview:async e=>a.A.post("/reviews",{bookId:e.bookId,content:e.content,rating:e.rating}),updateReview:async(e,t)=>a.A.patch("/reviews/".concat(e),{content:t.content,rating:t.rating}),deleteReview:async e=>a.A.delete("/reviews/".concat(e)),getAverageRating:async e=>a.A.get("/reviews/book/".concat(e,"/average-rating"))}},8964:(e,t,s)=>{s.d(t,{d:()=>i});s(5043);var a=s(579);const i=e=>{let{currentPage:t,totalPages:s,onPageChange:i,className:n=""}=e;if(s<=1)return null;return(0,a.jsxs)("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 py-3 ".concat(n),"aria-label":"Pagination",children:[(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",(0,a.jsx)("span",{className:"font-medium",children:t})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:s})]})}),(0,a.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[(0,a.jsx)("button",{onClick:()=>i(t-1),disabled:1===t,className:"relative inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("div",{className:"hidden sm:flex sm:items-center",children:(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(()=>{const e=[];e.push(1);const a=Math.max(2,t-1),i=Math.min(s-1,t+1);a>2&&e.push(-1);for(let t=a;t<=i;t++)e.push(t);return i<s-1&&e.push(-2),s>1&&e.push(s),e})().map((e,s)=>e<0?(0,a.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700",children:"..."},e):(0,a.jsx)("button",{onClick:()=>i(e),className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold ".concat(e===t?"bg-primary-600 text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"),"aria-current":e===t?"page":void 0,children:e},e))})}),(0,a.jsx)("button",{onClick:()=>i(t+1),disabled:t===s,className:"relative ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}},9461:(e,t,s)=>{e.exports=s(2330)}}]);
//# sourceMappingURL=885.c20ff8d7.chunk.js.map